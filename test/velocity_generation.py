from dataclasses import dataclass

import numpy as np

from iac_planner.generate_velocity_profile import generate_velocity_profile
from iac_planner.helpers import VelParams, state_t


@dataclass
class Env:
    #                          x   y   theta       vel
    state: state_t = np.array([2., 2., 0.52359878, 18.])
    # Problem disappears when vel < 18
    vel_params: VelParams = VelParams()


path = np.array([[2., 2.],
                 [3.61290323, 2.90519554],
                 [5.22580645, 3.75836195],
                 [6.83870968, 4.55949922],
                 [8.4516129, 5.30860736],
                 [10.06451613, 6.00568635],
                 [11.67741935, 6.65073622],
                 [13.29032258, 7.24375694],
                 [14.90322581, 7.78474853],
                 [16.51612903, 8.27371098],
                 [18.12903226, 8.7106443],
                 [19.74193548, 9.09554848],
                 [21.35483871, 9.42842352],
                 [22.96774194, 9.70926943],
                 [24.58064516, 9.9380862],
                 [26.19354839, 10.11487384],
                 [27.80645161, 10.23963234],
                 [29.41935484, 10.3123617],
                 [31.03225806, 10.33306193],
                 [32.64516129, 10.30173302],
                 [34.25806452, 10.21837497],
                 [35.87096774, 10.08298779],
                 [37.48387097, 9.89557147],
                 [39.09677419, 9.65612601],
                 [40.70967742, 9.36465142],
                 [42.32258065, 9.02114769],
                 [43.93548387, 8.62561483],
                 [45.5483871, 8.17805283],
                 [47.16129032, 7.67846169],
                 [48.77419355, 7.12684142],
                 [50.38709677, 6.52319201],
                 [52., 5.86751346]])

if __name__ == '__main__':
    env = Env()
    vel_prof = generate_velocity_profile(env, path)
    print(vel_prof)
